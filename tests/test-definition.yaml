---
dimensions:
  - name: trino-lb
    values:
      - oci.stackable.tech/stackable/trino-lb:dev
      # - oci.stackable.tech/stackable/trino-lb:0.5.0
  - name: trino
    values:
      - "451"
      # - "470" # Reduce test count
      - "476"
      # To use a custom image, add a comma and the full name after the product version
      # - 470,oci.stackable.tech/sdp/trino:470-stackable0.0.0-dev
      # However, watch out, you need to tweak the trino-cli image
  - name: trino-latest
    values:
      - "470"
  # As not all Trino versions support client spooling, we have an extra dimension
  - name: trino-client-spooling
    values:
      - "476"
  - name: trino-lb-https
    values:
      - "true"
      - "false"
  - name: persistence
    values:
      - inMemory
      - redis
      - postgres
tests:
  - name: smoke
    dimensions:
      - trino-lb
      - trino
      - persistence
  - name: client-spooling
    dimensions:
      - trino-lb
      - trino-client-spooling

# TODOS
# 1. Restart trino-lb deployment to make sure persistence is kept
